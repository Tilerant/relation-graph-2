# 🤖 AI知识图谱助手演示

这是基于设计文档构建的AI操作图谱功能演示。

## 🎯 核心功能

**用自然语言操作图谱** - 这是系统的核心价值：

- 用一句话创建多个相关节点
- AI自动建立节点间的连接关系
- 支持撤销/重做所有AI操作
- 实时图谱可视化

## 🚀 快速开始

### 1. 启动演示

```typescript
// 在App.tsx中使用
import { AIDemo } from './src/AIDemo';

function App() {
  return <AIDemo />;
}
```

### 2. 配置API密钥

- 首次打开会提示输入OpenAI API密钥
- API密钥仅在本地存储，不会上传
- 可选择"跳过"使用模拟模式演示

### 3. 尝试AI指令

点击右下角的AI助手，试试这些指令：

```
"创建一个关于人工智能的知识图谱"
"帮我整理前端技术栈的分类"
"构建项目管理流程的节点结构"
"创建咖啡分类和相关知识点"
```

## ⌨️ 快捷键

- `Ctrl/Cmd + Z` - 撤销操作
- `Ctrl + Y` / `Cmd + Shift + Z` - 重做操作  
- `Ctrl/Cmd + K` - 打开AI助手
- `Ctrl + Enter` - 发送AI指令

## 🏗️ 架构特点

### 基于设计文档的实现

- **可撤销命令模式**: 每个AI操作都可以完整撤销
- **事件驱动架构**: 命令执行后发布事件通知
- **节点类型系统**: 支持不同类型节点的差异化处理
- **增强命令系统**: 内置撤销/重做栈管理

### 核心组件

```
AICommandProcessor - AI指令解析器
├── 自然语言 → 结构化操作
├── 调用OpenAI/Claude API
└── 生成可执行命令序列

EnhancedCommandSystem - 增强命令系统  
├── 执行可撤销命令
├── 管理撤销/重做栈
└── 发布事件通知

ReversibleCommand - 可撤销命令
├── CreateNodeCommand - 创建节点
├── CreateEdgeCommand - 创建连接
└── UpdateNodeCommand - 更新节点
```

### 数据流

```
用户指令 → AI解析 → 命令生成 → 命令执行 → 状态更新 → 界面渲染
     ↓         ↓         ↓         ↓         ↓
  自然语言   结构化操作   可撤销命令   事件发布   React更新
```

## 🎨 界面特性

- **响应式设计**: 适配不同屏幕尺寸
- **实时反馈**: AI处理进度和结果提示
- **快捷操作**: 示例指令一键输入
- **可视化**: React Flow图谱展示
- **交互友好**: 拖拽、缩放、选择节点

## 🔧 扩展方向

这个演示为未来扩展奠定了基础：

### 即时可加的功能
- ✅ 更多AI操作类型（删除、移动、分组）
- ✅ 自定义节点样式和类型
- ✅ 导出图谱为图片/JSON
- ✅ 本地数据持久化

### 需要额外开发的功能  
- 🔄 实时协作（Yjs集成）
- 📝 富文本编辑（TipTap替换）
- 🔌 插件系统（Obsidian风格）
- 🌐 MCP协议支持

## 📊 技术栈

- **前端**: React 19 + TypeScript + Vite
- **图形**: React Flow + 自定义节点组件
- **状态**: Zustand + 命令模式
- **AI**: OpenAI API + 结构化提示
- **样式**: 原生CSS + 模块化设计

## 💡 设计原则

1. **AI为核心**: 所有功能围绕AI操作设计
2. **可撤销性**: 任何操作都可以撤销
3. **类型安全**: 严格的TypeScript类型定义
4. **高内聚**: 命令的执行和撤销逻辑在一起
5. **事件驱动**: 松耦合的组件通信

## 🚦 演示价值

这个演示验证了核心假设：

- ✅ AI可以理解自然语言图谱需求
- ✅ 结构化操作转换是可行的  
- ✅ 可撤销命令架构工作良好
- ✅ 用户体验足够直观流畅

下一步可以基于用户反馈决定是否投入更多功能开发。

---

**🎯 记住：这个演示的目标是展示"魔法瞬间" - 用一句话让AI创建整个知识结构！**